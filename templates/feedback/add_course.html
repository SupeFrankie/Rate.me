{% extends "base.html" %}

{% block title %}Add Course - Rate.me{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card shadow-lg border-0 rounded-4">
            <div class="card-header text-white text-center" style="background: linear-gradient(90deg, #6a11cb, #2575fc);">
                <h3 class="mb-0"><i class="bi bi-plus-circle"></i> Add a New Course</h3>
            </div>

            <div class="card-body p-4">
                <p class="text-muted text-center mb-4">
                    Add a course offered under Business, Computer Science, or Law.  
                    Ensure course details are accurate before submission.
                </p>

                <form method="POST">
                    {% csrf_token %}
                    
                    <div class="mb-3">
                        <label for="{{ form.code.id_for_label }}" class="form-label fw-semibold">Course Code *</label>
                        {{ form.code }}
                        {% if form.code.errors %}
                            <div class="text-danger small">{{ form.code.errors }}</div>
                        {% endif %}
                        <small class="form-text text-muted">Examples: CS101, BUS203, LAW305</small>
                    </div>
                    
                    <div class="mb-3">
                        <label for="{{ form.name.id_for_label }}" class="form-label fw-semibold">Course Name *</label>
                        {{ form.name }}
                        {% if form.name.errors %}
                            <div class="text-danger small">{{ form.name.errors }}</div>
                        {% endif %}
                        <small class="form-text text-muted">E.g., Introduction to Programming, Business Ethics, Criminal Law</small>
                    </div>
                    
                    <!-- Predefined Department Dropdown -->
                    <div class="mb-3">
                        <label for="department" class="form-label fw-semibold">Department *</label>
                        <select name="department" id="department" class="form-select" required>
                            <option value="">-- Select Department --</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Business">Business</option>
                            <option value="Law">Law</option>
                        </select>
                        {% if form.department.errors %}
                            <div class="text-danger small">{{ form.department.errors }}</div>
                        {% endif %}
                        <small class="form-text text-muted">Choose the relevant department for this course.</small>
                    </div>
                    
                    <div class="mb-3">
                        <label for="{{ form.description.id_for_label }}" class="form-label fw-semibold">Description (Optional)</label>
                        {{ form.description }}
                        {% if form.description.errors %}
                            <div class="text-danger small">{{ form.description.errors }}</div>
                        {% endif %}
                    </div>

                    <hr class="my-4">

                    <h5 class="fw-semibold text-center mb-3">ðŸ’¡ Popular Course Examples</h5>
                    <div class="row text-muted small">
                        <div class="col-md-4">
                            <h6 class="fw-bold text-primary">Computer Science</h6>
                            <ul class="list-unstyled mb-2">
                                <li>CS101 - Introduction to Programming</li>
                                <li>CS202 - Data Structures & Algorithms</li>
                                <li>CS305 - Machine Learning</li>
                                <li>CS401 - Database Systems</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6 class="fw-bold text-success">Business</h6>
                            <ul class="list-unstyled mb-2">
                                <li>BUS201 - Principles of Management</li>
                                <li>BUS305 - Business Ethics</li>
                                <li>MKT210 - Marketing Strategies</li>
                                <li>FIN310 - Financial Accounting</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <h6 class="fw-bold text-danger">Law</h6>
                            <ul class="list-unstyled mb-2">
                                <li>LAW101 - Introduction to Law</li>
                                <li>LAW204 - Criminal Law</li>
                                <li>LAW301 - Contract Law</li>
                                <li>LAW402 - Human Rights Law</li>
                            </ul>
                        </div>
                    </div>

                    <div class="d-grid gap-2 mt-4">
                        <button type="submit" class="btn btn-primary btn-lg gradient-btn">
                            <i class="bi bi-check-circle"></i> Add Course
                        </button>
                        <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary">
                            <i class="bi bi-x-circle"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
/* Gradient hover animation */
.gradient-btn {
    background: linear-gradient(90deg, #2575fc, #6a11cb);
    border: none;
    transition: background 0.4s ease-in-out, transform 0.2s ease;
}

.gradient-btn:hover {
    background: linear-gradient(90deg, #6a11cb, #b721ff);
    transform: scale(1.03);
}

.gradient-btn:active {
    background: linear-gradient(90deg, #b721ff, #6a11cb);
    transform: scale(0.98);
}
</style>
{% endblock %}

                        No feedback available yet. Encourage your students to provide feedback!
                    </div>
            </div>
        </div>
    </div>

    <!-- AI Suggestions Sidebar -->
<div class="col-lg-4">
    <div class="card shadow mb-4 border-0">
        <div class="card-header text-white" 
             style="background: linear-gradient(90deg, #2575fc, #6a11cb); border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
            <h4 class="mb-0 d-flex align-items-center">
                <i class="bi bi-lightbulb me-2"></i> AI-Powered Teaching Suggestions
            </h4>
        </div>

        <div class="card-body" style="background: #f8f9fa;">
            {% if suggestions %}
                <ul class="list-group list-group-flush">
                    {% for suggestion in suggestions %}
                    <li class="list-group-item bg-transparent border-0 mb-2 p-3 shadow-sm rounded"
                        style="background: rgba(255, 255, 255, 0.8); transition: transform 0.2s ease, box-shadow 0.2s ease;">
                        <strong class="d-block text-primary">{{ suggestion.title }}</strong>
                        <p class="mb-1 text-muted" style="font-size: 0.9rem;">{{ suggestion.content }}</p>
                        <small class="text-secondary">
                            <i class="bi bi-clock"></i> {{ suggestion.created_at|date:"M d, Y" }}
                        </small>
                    </li>
                    {% endfor %}
                </ul>
            {% else %}
                <div class="alert alert-info mb-0 text-center shadow-sm">
                    <i class="bi bi-info-circle"></i> 
                    No suggestions available yet. Check back after students provide more feedback.
                </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
    /* Hover animation for AI suggestions */
    .list-group-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(106, 17, 203, 0.15);
    }
</style>
</div>